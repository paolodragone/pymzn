

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Solvers &mdash; PyMzn 0.18.3 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pymzn.Solver" href="generated/pymzn.Solver.html" />
    <link rel="prev" title="pymzn.rebase_array" href="../dzn/generated/pymzn.rebase_array.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> PyMzn
          

          
          </a>

          
            
            
              <div class="version">
                0.18.3
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Manual</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../minizinc/index.html">MiniZinc tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dzn/index.html">Dzn files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Solvers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Solver.html">pymzn.Solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Gecode.html">pymzn.Gecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Chuffed.html">pymzn.Chuffed</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Optimathsat.html">pymzn.Optimathsat</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Opturion.html">pymzn.Opturion</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.MIPSolver.html">pymzn.MIPSolver</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.Gurobi.html">pymzn.Gurobi</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.CBC.html">pymzn.CBC</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.OscarCBLS.html">pymzn.OscarCBLS</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.ORTools.html">pymzn.ORTools</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.gecode.html">pymzn.gecode</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.chuffed.html">pymzn.chuffed</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.optimathsat.html">pymzn.optimathsat</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.opturion.html">pymzn.opturion</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.gurobi.html">pymzn.gurobi</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.cbc.html">pymzn.cbc</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.oscar_cbls.html">pymzn.oscar_cbls</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/pymzn.or_tools.html">pymzn.or_tools</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../templates/index.html">Templating</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aio/index.html">Asynchronous execution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../config.html">Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../exec.html">PyMzn executable</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">PyMzn</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Manual</a> &raquo;</li>
        
      <li>Solvers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="solvers">
<h1>Solvers<a class="headerlink" href="#solvers" title="Permalink to this headline">¶</a></h1>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.Solver.html#pymzn.Solver" title="pymzn.Solver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Solver</span></code></a>(solver_id)</p></td>
<td><p>Abstract solver class.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.Gecode.html#pymzn.Gecode" title="pymzn.Gecode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gecode</span></code></a>([solver_id])</p></td>
<td><p>Interface to the Gecode solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.Chuffed.html#pymzn.Chuffed" title="pymzn.Chuffed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Chuffed</span></code></a>([solver_id])</p></td>
<td><p>Interface to the Chuffed solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.Optimathsat.html#pymzn.Optimathsat" title="pymzn.Optimathsat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Optimathsat</span></code></a>([solver_id])</p></td>
<td><p>Interface to the Optimathsat solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.Opturion.html#pymzn.Opturion" title="pymzn.Opturion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Opturion</span></code></a>([solver_id])</p></td>
<td><p>Interface to the Opturion CPX solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.MIPSolver.html#pymzn.MIPSolver" title="pymzn.MIPSolver"><code class="xref py py-obj docutils literal notranslate"><span class="pre">MIPSolver</span></code></a>(solver_id)</p></td>
<td><p>Generic interface to MIP solvers.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.Gurobi.html#pymzn.Gurobi" title="pymzn.Gurobi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Gurobi</span></code></a>([solver_id, dll])</p></td>
<td><p>Interface to the Gurobi solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.CBC.html#pymzn.CBC" title="pymzn.CBC"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CBC</span></code></a>([solver_id])</p></td>
<td><p>Interface to the COIN-OR CBC solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.OscarCBLS.html#pymzn.OscarCBLS" title="pymzn.OscarCBLS"><code class="xref py py-obj docutils literal notranslate"><span class="pre">OscarCBLS</span></code></a>([solver_id])</p></td>
<td><p>Interface to the Oscar/CBLS solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.ORTools.html#pymzn.ORTools" title="pymzn.ORTools"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ORTools</span></code></a>([solver_id])</p></td>
<td><p>Interface to the OR-tools solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.gecode.html#pymzn.gecode" title="pymzn.gecode"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gecode</span></code></a></p></td>
<td><p>Interface to the Gecode solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.chuffed.html#pymzn.chuffed" title="pymzn.chuffed"><code class="xref py py-obj docutils literal notranslate"><span class="pre">chuffed</span></code></a></p></td>
<td><p>Interface to the Chuffed solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.optimathsat.html#pymzn.optimathsat" title="pymzn.optimathsat"><code class="xref py py-obj docutils literal notranslate"><span class="pre">optimathsat</span></code></a></p></td>
<td><p>Interface to the Optimathsat solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.opturion.html#pymzn.opturion" title="pymzn.opturion"><code class="xref py py-obj docutils literal notranslate"><span class="pre">opturion</span></code></a></p></td>
<td><p>Interface to the Opturion CPX solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.gurobi.html#pymzn.gurobi" title="pymzn.gurobi"><code class="xref py py-obj docutils literal notranslate"><span class="pre">gurobi</span></code></a></p></td>
<td><p>Interface to the Gurobi solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.cbc.html#pymzn.cbc" title="pymzn.cbc"><code class="xref py py-obj docutils literal notranslate"><span class="pre">cbc</span></code></a></p></td>
<td><p>Interface to the COIN-OR CBC solver.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/pymzn.oscar_cbls.html#pymzn.oscar_cbls" title="pymzn.oscar_cbls"><code class="xref py py-obj docutils literal notranslate"><span class="pre">oscar_cbls</span></code></a></p></td>
<td><p>Interface to the Oscar/CBLS solver.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/pymzn.or_tools.html#pymzn.or_tools" title="pymzn.or_tools"><code class="xref py py-obj docutils literal notranslate"><span class="pre">or_tools</span></code></a></p></td>
<td><p>Interface to the OR-tools solver.</p></td>
</tr>
</tbody>
</table>
<span class="target" id="module-pymzn.mzn.solvers"></span><p>PyMzn interfaces with solvers through the <code class="docutils literal notranslate"><span class="pre">Solver</span></code> base class. This class
includes the necessary infomation for PyMzn to setup the solver, and provides
two main functions to support custom solver arguments and parsing the solution
stream of the solver.</p>
<p>PyMzn provides a number of solver implementations out-of-the-box.  PyMzn’s
default solver is <code class="docutils literal notranslate"><span class="pre">pymzn.gecode</span></code>, an instance of <code class="docutils literal notranslate"><span class="pre">pymzn.Gecode</span></code>.</p>
<p>To use a solver that is not provided by PyMzn or to extend an existing one, one
has to subclass the <code class="docutils literal notranslate"><span class="pre">Solver</span></code> class and implement the <code class="docutils literal notranslate"><span class="pre">args</span></code> method, which
returns a list of command line arguments for executing the process. The
command line arguments supported by this function have to be paired with proper
<code class="docutils literal notranslate"><span class="pre">extraFlags</span></code> in the solver configuration file (see the <a class="reference external" href="https://www.minizinc.org/doc-latest/en/fzn-spec.html#solver-configuration-files">solver configuration
files page</a>
from the MiniZinc reference manual for additional details).</p>
<p>For instance, suppose you have the following configuration file for an external
solver, <code class="docutils literal notranslate"><span class="pre">my_solver.msc</span></code>:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;My Solver&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;org.myorg.my_solver&quot;</span><span class="p">,</span>
  <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="s2">&quot;fzn-mysolver&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You want to support the command line argument <code class="docutils literal notranslate"><span class="pre">--solve-twice-as-fast</span></code>. First
you need to add the flag into the solver configuration file:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span> <span class="p">:</span> <span class="s2">&quot;My Solver&quot;</span><span class="p">,</span>
  <span class="nt">&quot;version&quot;</span><span class="p">:</span> <span class="s2">&quot;1.0&quot;</span><span class="p">,</span>
  <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;org.myorg.my_solver&quot;</span><span class="p">,</span>
  <span class="nt">&quot;executable&quot;</span><span class="p">:</span> <span class="s2">&quot;fzn-mysolver&quot;</span><span class="p">,</span>
  <span class="nt">&quot;extraFlags&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span><span class="s2">&quot;--solve-twice-as-fast&quot;</span><span class="p">,</span> <span class="s2">&quot;provides twofold speedup&quot;</span><span class="p">,</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span> <span class="s2">&quot;false&quot;</span><span class="p">]</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This will make the argument available to the <code class="docutils literal notranslate"><span class="pre">minizinc</span></code> executable when using
the solver <code class="docutils literal notranslate"><span class="pre">my_solver</span></code>. Next, to add this option to PyMzn, you need to
subclass the <code class="docutils literal notranslate"><span class="pre">Solver</span></code> class and override the <code class="docutils literal notranslate"><span class="pre">args</span></code> function:</p>
<div class="highlight-python3 notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="kn">from</span> <span class="nn">pymzn</span> <span class="k">import</span> <span class="n">Solver</span>

 <span class="k">class</span> <span class="nc">MySolver</span><span class="p">(</span><span class="n">Solver</span><span class="p">):</span>
     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
         <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">solver_id</span><span class="o">=</span><span class="s1">&#39;my_solver&#39;</span><span class="p">)</span>

     <span class="k">def</span> <span class="nf">args</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">solve_twice_as_fast</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
         <span class="n">args</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">args</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
         <span class="k">if</span> <span class="n">solve_twice_as_fast</span><span class="p">:</span>
             <span class="n">args</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;--solve-twice-as-fast&#39;</span><span class="p">)</span>
         <span class="k">return</span> <span class="n">args</span>
</pre></div>
</td></tr></table></div>
<p>It is then possible to run the <code class="docutils literal notranslate"><span class="pre">minizinc</span></code> function with the custom solver:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">my_solver</span> <span class="o">=</span> <span class="n">MySolver</span><span class="p">()</span>
<span class="n">pymzn</span><span class="o">.</span><span class="n">minizinc</span><span class="p">(</span><span class="s1">&#39;test.mzn&#39;</span><span class="p">,</span> <span class="n">solver</span><span class="o">=</span><span class="n">my_solver</span><span class="p">,</span> <span class="n">solve_twice_as_fast</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="generated/pymzn.Solver.html" class="btn btn-neutral float-right" title="pymzn.Solver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../dzn/generated/pymzn.rebase_array.html" class="btn btn-neutral float-left" title="pymzn.rebase_array" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, Paolo Dragone (MIT License)

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>